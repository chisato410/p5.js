<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Noise Circle Flow</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <style>
      body {
        background: #111;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
      }
      canvas {
        border: 4px double #ffff00;
        border-radius: 20px;
        width: 500px;
        height: 500px;
      }
      .caption {
        position: absolute;
        left: 16px;
        bottom: 16px;
        color: #fff;
        font-family: Helvetica, Arial;
      }
    </style>
  </head>
  <body>
    <div class="caption">Noise Circle Flow</div>
    <script>
      let noiseMax = 1;
      let zoff = 0;
      let ca, cb;
      let ox, oy;

      function setup() {
        createCanvas(500, 500);
        angleMode(DEGREES);
        colorMode(HSB, 360, 100, 100, 1);
        ca = color(180, 70, 90, 0.7);
        cb = color(330, 80, 100, 0.7);
        ox = width / 2;
        oy = height / 2;
        background(210, 30, 95);
        noFill();
      }

      function draw() {
        stroke(lerpColor(ca, cb, abs(sin(zoff * 100))));
        push();
        translate(ox, oy);
        beginShape();
        for (let t = 0; t < 360; t++) {
          let xoff = map(cos(t), -1, 1, 0, noiseMax);
          let yoff = map(sin(t), -1, 1, 0, noiseMax);
          let n = noise(xoff, yoff, zoff);
          let r = map(n, 0, 1, 0, height * 0.7);
          let x = r * cos(t);
          let y = r * sin(t);
          vertex(x, y);
        }
        endShape(CLOSE);
        pop();
        zoff += 0.005;
      }
    </script>
  </body>
</html>
